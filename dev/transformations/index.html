<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Transformations · DeviceLayout.jl</title><meta name="title" content="Transformations · DeviceLayout.jl"/><meta property="og:title" content="Transformations · DeviceLayout.jl"/><meta property="twitter:title" content="Transformations · DeviceLayout.jl"/><meta name="description" content="Documentation for DeviceLayout.jl."/><meta property="og:description" content="Documentation for DeviceLayout.jl."/><meta property="twitter:description" content="Documentation for DeviceLayout.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DeviceLayout.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Geometry-Level Layout</span><ul><li><a class="tocitem" href="../geometrylevel/">Overview</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><a class="tocitem" href="../points/">Points</a></li><li><a class="tocitem" href="../geometry/">Geometry</a></li><li class="is-active"><a class="tocitem" href>Transformations</a><ul class="internal"><li><a class="tocitem" href="#Creating-transformations"><span>Creating transformations</span></a></li><li><a class="tocitem" href="#Applying-transformations"><span>Applying transformations</span></a></li><li><a class="tocitem" href="#Inspecting-transformations"><span>Inspecting transformations</span></a></li><li><a class="tocitem" href="#Implementation-details"><span>Implementation details</span></a></li></ul></li><li><a class="tocitem" href="../entitystyles/">Entity Styles</a></li><li><a class="tocitem" href="../polygons/">Polygons</a></li><li><a class="tocitem" href="../coordinate_systems/">Coordinate Systems</a></li><li><a class="tocitem" href="../texts/">Texts</a></li><li><a class="tocitem" href="../paths/">Paths</a></li><li><a class="tocitem" href="../routes/">Routes</a></li><li><a class="tocitem" href="../shapes/">Shape library</a></li><li><a class="tocitem" href="../autofill/">Autofill</a></li><li><a class="tocitem" href="../render/">Rendering</a></li><li><a class="tocitem" href="../solidmodels/">Solid Models (3D Geometry)</a></li><li><a class="tocitem" href="../fileio/">File Formats</a></li><li><a class="tocitem" href="../faq/">Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Schematic-Driven Layout</span><ul><li><a class="tocitem" href="../schematicdriven/">Overview</a></li><li><a class="tocitem" href="../schematicdriven/components/">Components</a></li><li><a class="tocitem" href="../schematicdriven/hooks/">Hooks</a></li><li><a class="tocitem" href="../schematicdriven/schematics/">Schematics</a></li><li><a class="tocitem" href="../schematicdriven/technologies/">Technologies</a></li><li><a class="tocitem" href="../schematicdriven/targets/">Targets</a></li><li><a class="tocitem" href="../schematicdriven/solidmodels/">Solid Models</a></li><li><a class="tocitem" href="../schematicdriven/pdks/">PDKs</a></li><li><a class="tocitem" href="../schematicdriven/faq/">Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examplepdk/">ExamplePDK</a></li><li><a class="tocitem" href="../examples/qpu17/">Quantum Processor</a></li><li><a class="tocitem" href="../examples/singletransmon/">Single-Transmon Simulation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Geometry-Level Layout</a></li><li class="is-active"><a href>Transformations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Transformations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/main/docs/src/transformations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Coordinate-Transformations"><a class="docs-heading-anchor" href="#Coordinate-Transformations">Coordinate Transformations</a><a id="Coordinate-Transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Coordinate-Transformations" title="Permalink"></a></h1><p>The mechanism for affine transformations is largely provided by the <a href="https://github.com/FugroRoames/CoordinateTransformations.jl"><code>CoordinateTransformations.jl</code></a> package. For convenience, the documentation for <code>Translation</code> and <code>compose</code> is reproduced below from that package. We also provide convenience constructors for <code>Reflection</code> across a specified line and <code>Rotation</code> around a specified point, as well as a <code>ScaledIsometry</code> type that represents transformations restricted to those that preserve angles.</p><h2 id="Creating-transformations"><a class="docs-heading-anchor" href="#Creating-transformations">Creating transformations</a><a id="Creating-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-transformations" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CoordinateTransformations.compose" href="#CoordinateTransformations.compose"><code>CoordinateTransformations.compose</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compose(trans1, trans2)
trans1 ∘ trans2</code></pre><p>Take two transformations and create a new transformation that is equivalent to successively applying <code>trans2</code> to the coordinate, and then <code>trans1</code>. By default will create a <code>ComposedTransformation</code>, however this method can be overloaded for efficiency (e.g. two affine transformations naturally compose to a single affine transformation).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeometry/CoordinateTransformations.jl/blob/v0.6.4/src/core.jl#L56-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CoordinateTransformations.Translation" href="#CoordinateTransformations.Translation"><code>CoordinateTransformations.Translation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Translation(v) &lt;: AbstractAffineMap
Translation(dx, dy)         # 2D
Translation(dx, dy, dz)     # 3D</code></pre><p>Construct the <code>Translation</code> transformation for translating Cartesian points by an offset <code>v = (dx, dy, ...)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeometry/CoordinateTransformations.jl/blob/v0.6.4/src/affine.jl#L9-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.Reflection" href="#DeviceLayout.Transformations.Reflection"><code>DeviceLayout.Transformations.Reflection</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Reflection(α; through_pt=nothing)
Reflection(vec::Point; through_pt=nothing)
Reflection(p1::Point, p2::Point)</code></pre><p>Construct a reflection across a line.</p><p>The line can be specified by two points <code>p1, p2</code> or by a direction and point <code>through_pt</code> the line passes through. The direction can be a vector or an angle made with the positive x axis (units accepted; no units =&gt; radians), and the <code>through_pt</code> is the origin by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L103-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.XReflection" href="#DeviceLayout.Transformations.XReflection"><code>DeviceLayout.Transformations.XReflection</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">XReflection()</code></pre><p>Construct a reflection about the x-axis (y-coordinate changes sign).</p><p>Example:</p><pre><code class="language-julia-repl hljs">julia&gt; trans = XReflection()
LinearMap([1 0; 0 -1])

julia&gt; trans(Point(1, 1))
2-element Point{Int64} with indices SOneTo(2):
  1
 -1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L65-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.YReflection" href="#DeviceLayout.Transformations.YReflection"><code>DeviceLayout.Transformations.YReflection</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">YReflection()</code></pre><p>Construct a reflection about the y-axis (x-coordinate changes sign).</p><p>Example:</p><pre><code class="language-julia-repl hljs">julia&gt; trans = YReflection()
LinearMap([-1 0; 0 1])

julia&gt; trans(Point(1, 1))
2-element Point{Int64} with indices SOneTo(2):
 -1
  1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L84-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.Rotation" href="#DeviceLayout.Transformations.Rotation"><code>DeviceLayout.Transformations.Rotation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Rotation(Θ; around_pt=nothing)</code></pre><p>Construct a rotation about the origin or <code>around_pt</code>. Units accepted (no units ⇒ radians).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L39-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.RotationPi" href="#DeviceLayout.Transformations.RotationPi"><code>DeviceLayout.Transformations.RotationPi</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RotationPi(Θ_over_pi=1; around_pt=nothing)</code></pre><p>Construct a rotation about the origin or <code>around_pt</code>, with rotation in units of <code>pi</code> (<code>180°</code>).</p><p>This may be useful if you know your rotation will be a multiple of 90° but not necessarily which one, since it can be slightly more precise than <code>Rotation</code> (as <code>sincospi</code> is to <code>sincos</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L50-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.ScaledIsometry" href="#DeviceLayout.Transformations.ScaledIsometry"><code>DeviceLayout.Transformations.ScaledIsometry</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ScaledIsometry{T&lt;:Union{Point, Nothing}} &lt;: AbstractAffineMap
ScaledIsometry(origin=nothing, rotation=0°, xrefl=false, mag=1.0)</code></pre><p>A coordinate transformation that preserves angles.</p><p>The equivalent transformation of <code>f::ScaledIsometry</code> is the composition of the following transformations, ordered with reflection applied first:</p><ol><li>If <code>xrefl(f)</code> is <code>true</code>, a reflection across the <code>x</code>-axis</li><li>Rotation by <code>rotation(f)</code></li><li>Magnification by <code>mag(f)</code></li><li>Translation by <code>origin(f)</code></li></ol><p>May be also be constructed as</p><pre><code class="language-julia hljs">ScaledIsometry(f::Transformation) = ScaledIsometry(origin(f), rotation(f), xrefl(f), mag(f))</code></pre><p>but a <code>DomainError</code> will be thrown if <code>f</code> is not a scaled isometry (does not preserve angles).</p><p><code>Transformation</code> compositions (with <code>compose</code> or <code>∘</code>) involving a <code>ScaledIsometry</code> will return a <code>ScaledIsometry</code> if the other transformation also preserves angles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L240-L264">source</a></section></article><p>Transformations can also be inverted with <code>inv</code>.</p><h2 id="Applying-transformations"><a class="docs-heading-anchor" href="#Applying-transformations">Applying transformations</a><a id="Applying-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Applying-transformations" title="Permalink"></a></h2><p>Coordinate transformations can be applied to any <code>AbstractGeometry</code> object, creating a new object with its coordinates transformed. Transformations created using the constructors in the above section can be applied directly to objects like a function. Here&#39;s an example with a <code>Rectangle</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; r = Rectangle(2, 1)
Rectangle{Int64}((0,0), (2,1))

julia&gt; trans = Translation(10, 10)
Translation(10, 10)

julia&gt; trans = Rotation(90°) ∘ trans
AffineMap([0.0 -1.0; 1.0 0.0], [-10.0, 10.0])

julia&gt; trans(r)
Rectangle{Float64}((-11.0,10.0), (-10.0,12.0))</code></pre><h3 id="Simple-transformations"><a class="docs-heading-anchor" href="#Simple-transformations">Simple transformations</a><a id="Simple-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-transformations" title="Permalink"></a></h3><p>There are methods for conveniently applying simple transformations:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.centered" href="#DeviceLayout.centered"><code>DeviceLayout.centered</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">centered(ent::AbstractGeometry; on_pt=zero(Point{T}))</code></pre><p>Centers a copy of <code>ent</code> on <code>on_pt</code>, with promoted coordinates if necessary. This function will not throw an <code>InexactError()</code>, even if <code>ent</code> had integer coordinates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L276-L282">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.magnify" href="#DeviceLayout.magnify"><code>DeviceLayout.magnify</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">magnify(geom, mag)</code></pre><p>Returns a copy of <code>geom</code> magnified by a factor of <code>mag</code>.</p><p>The origin is the center of magnification.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L180-L186">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.reflect_across_line" href="#DeviceLayout.reflect_across_line"><code>DeviceLayout.reflect_across_line</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reflect_across_line(geom, dir; through_pt=nothing)
reflect_across_line(geom, p0, p1)</code></pre><p>Return a copy of <code>geom</code> reflected across a line.</p><p>The line is specified through two points <code>p0</code> and <code>p1</code> that it passes through, or by a direction <code>dir</code> (vector or angle made with the x-axis) and a point <code>through_pt</code> that it passes through.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L220-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.reflect_across_xaxis" href="#DeviceLayout.reflect_across_xaxis"><code>DeviceLayout.reflect_across_xaxis</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reflect_across_xaxis(geom)</code></pre><p>Return a copy of <code>geom</code> reflected across the x-axis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L205-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.rotate" href="#DeviceLayout.rotate"><code>DeviceLayout.rotate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rotate(ent, rot)</code></pre><p>Return a copy of <code>geom</code> rotated counterclockwise by <code>rot</code> around the origin.</p><p>Units are accepted (no units =&gt; radians).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L189-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.rotate90" href="#DeviceLayout.rotate90"><code>DeviceLayout.rotate90</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rotate90(geom, n)</code></pre><p>Return a copy of <code>geom</code> rotated counterclockwise by <code>n</code> 90° turns.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L198-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.translate" href="#DeviceLayout.translate"><code>DeviceLayout.translate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">translate(geom, displacement)</code></pre><p>Return a copy of <code>geom</code> translated by <code>displacement</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L212-L216">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:+-Tuple{DeviceLayout.AbstractGeometry, Point}" href="#Base.:+-Tuple{DeviceLayout.AbstractGeometry, Point}"><code>Base.:+</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">+(ent::AbstractGeometry, p::Point)
+(p::Point, ent::AbstractGeometry)</code></pre><p>Translate an entity by <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L286-L291">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:--Tuple{DeviceLayout.AbstractGeometry, Point}" href="#Base.:--Tuple{DeviceLayout.AbstractGeometry, Point}"><code>Base.:-</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">-(ent::AbstractGeometry, p::Point)</code></pre><p>Translate an entity by <code>-p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L297-L301">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:*-Tuple{DeviceLayout.AbstractGeometry, Real}" href="#Base.:*-Tuple{DeviceLayout.AbstractGeometry, Real}"><code>Base.:*</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">*(ent::AbstractGeometry, a::Real)
*(a::Real, ent::AbstractGeometry)</code></pre><p>Magnify an entity by <code>a</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L305-L310">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:/-Tuple{DeviceLayout.AbstractGeometry, Real}" href="#Base.:/-Tuple{DeviceLayout.AbstractGeometry, Real}"><code>Base.:/</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">/(ent::AbstractGeometry, a::Real)</code></pre><p>Magnify an entity by <code>inv(a)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L314-L318">source</a></section></article><h3 id="Alignment"><a class="docs-heading-anchor" href="#Alignment">Alignment</a><a id="Alignment-1"></a><a class="docs-heading-anchor-permalink" href="#Alignment" title="Permalink"></a></h3><p>There are also methods to apply transformations that align objects using the edges of their bounding boxes.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.above" href="#DeviceLayout.Align.above"><code>DeviceLayout.Align.above</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">above(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box bottom aligned with the top of <code>target</code>&#39;s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L187-L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.below" href="#DeviceLayout.Align.below"><code>DeviceLayout.Align.below</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">below(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box top aligned with the bottom of <code>target</code>&#39;s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L194-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.leftof" href="#DeviceLayout.Align.leftof"><code>DeviceLayout.Align.leftof</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">leftof(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box right side aligned on the left of <code>target</code>&#39;s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L173-L177">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.rightof" href="#DeviceLayout.Align.rightof"><code>DeviceLayout.Align.rightof</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rightof(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box left side aligned on the right of <code>target</code>&#39;s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L180-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.flushbottom" href="#DeviceLayout.Align.flushbottom"><code>DeviceLayout.Align.flushbottom</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flushbottom(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box bottom flush with that of <code>target</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L222-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.flushtop" href="#DeviceLayout.Align.flushtop"><code>DeviceLayout.Align.flushtop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flushtop(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box top flush with that of <code>target</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L215-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.flushleft" href="#DeviceLayout.Align.flushleft"><code>DeviceLayout.Align.flushleft</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flushleft(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box left side flush with that of <code>target</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L201-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.flushright" href="#DeviceLayout.Align.flushright"><code>DeviceLayout.Align.flushright</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flushright(source, target; offset=0, centered=false)</code></pre><p>Align a copy of <code>source</code> with its bounding box right side flush with that of <code>target</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L208-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.centered_on" href="#DeviceLayout.Align.centered_on"><code>DeviceLayout.Align.centered_on</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">centered_on(source::AbstractGeometry, target::AbstractGeometry)</code></pre><p>Centers a copy of <code>source</code> centered on the center of <code>target</code>, promoting coordinates if necessary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L258-L262">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Align.aligned_to" href="#DeviceLayout.Align.aligned_to"><code>DeviceLayout.Align.aligned_to</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">aligned_to(source::AbstractGeometry{T}, target::AbstractGeometry{S},
           align_source::RectAlignRule, align_target::RectAlignRule;
           offset=convert(S, zero(T))) where {T,S}</code></pre><p>Aligns a copy of <code>source</code> with its <code>align_source</code> aligned to <code>align_target</code> of <code>target</code>.</p><p>For alignment in only one coordinate, the other coordinate is left unchanged. An optional <code>offset</code> will further displace the result in the aligned coordinate. Coordinates will be promoted if necessary when centering.</p><p><code>align_source</code> and <code>align_target</code> must match coordinates; that is, both must refer to the <code>x</code> coordinate (<code>Align.LeftEdge</code>, <code>Align.RightEdge</code>, or <code>Align.XCenter</code>) or both to the <code>y</code> coordinate (<code>Align.TopEdge</code>, <code>Align.BottomEdge</code>, or <code>Align.YCenter</code>).</p><p>Convenience functions <code>(leftof, rightof, above, below, flushleft, flushright, flushtop, flushbottom)</code> are also defined as wrappers around <code>aligned_to</code> with pre-specified <code>AlignRule</code>s.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; Align.aligned_to(Rectangle(2, 2), Rectangle(4, 4), Align.LeftEdge(), Align.XCenter())
Rectangle{Float64}((2.0,0.0), (4.0,2.0))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L108-L132">source</a></section><section><div><pre><code class="language-julia hljs">aligned_to(source::AbstractGeometry{T}, target::AbstractGeometry{S},
    align_source::Tuple{XAlignRule, YAlignRule},
    align_target::Tuple{XAlignRule, YAlignRule};
    offset::Point = zero(Point{promote_type(S, T)})) where {T,S}</code></pre><p>Align a copy of <code>source</code> to <code>target</code> in <code>x</code> and <code>y</code> coordinates simultaneously.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/align.jl#L144-L151">source</a></section></article><h2 id="Inspecting-transformations"><a class="docs-heading-anchor" href="#Inspecting-transformations">Inspecting transformations</a><a id="Inspecting-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Inspecting-transformations" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.isapprox_angle" href="#DeviceLayout.Transformations.isapprox_angle"><code>DeviceLayout.Transformations.isapprox_angle</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isapprox_angle(α1, α2; atol=1e-9)</code></pre><p>Test whether angles <code>α1</code> and <code>α2</code> are approximately equivalent.</p><p>Units may be used for one or both angles (no units =&gt; radians).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L207-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.isapprox_cardinal" href="#DeviceLayout.Transformations.isapprox_cardinal"><code>DeviceLayout.Transformations.isapprox_cardinal</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isapprox_cardinal(α; atol=1e-9)</code></pre><p>Test whether <code>α</code> is approximately a cardinal direction (0°, 90°, 180°, or 270°).</p><p>Units may be used. If <code>α</code> has no units, it is treated as an angle in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L223-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.mag" href="#DeviceLayout.Transformations.mag"><code>DeviceLayout.Transformations.mag</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mag(f::Translation)</code></pre><p>Return the magnification (uniform scaling factor) for <code>f</code>, if it is well defined.</p><p>Throws a <code>DomainError</code> if <code>f</code> does not preserve angles (&quot;scaling&quot; depends on direction).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L143-L149">source</a></section><section><div><pre><code class="language-julia hljs">mag(ref::GeometryReference)</code></pre><p>The magnification (uniform scaling factor) applied by <code>transformation(ref)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/references.jl#L189-L193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.origin" href="#DeviceLayout.Transformations.origin"><code>DeviceLayout.Transformations.origin</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">origin(f::Transformation)</code></pre><p>Return the transformed origin if it is translated, or <code>nothing</code> otherwise.</p><p>It&#39;s necessary to return <code>nothing</code> rather than a <code>zero(Point{T})</code> if there&#39;s no translation, because such transformations (e.g., <code>LinearMap</code>s) may not supply a coordinate type <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L124-L131">source</a></section><section><div><pre><code class="language-julia hljs">origin(ref::GeometryReference)</code></pre><p>The origin of the structure that <code>ref</code> points to, in <code>ref</code>&#39;s parent coordinate system.</p><p>Equivalently, the translation part of <code>transformation(ref)</code> (the transformation that <code>ref</code> would apply to <code>structure(ref)</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/references.jl#L172-L179">source</a></section><section><div><pre><code class="language-julia hljs">origin(sch::Schematic, node::ComponentNode)
origin(sch::Schematic, node_idx::Int)</code></pre><p>The origin of <code>node</code> in the global coordinate system of <code>sch</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/schematics/schematics.jl#L672-L677">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.preserves_angles" href="#DeviceLayout.Transformations.preserves_angles"><code>DeviceLayout.Transformations.preserves_angles</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">preserves_angles(f::Transformation)</code></pre><p>Return <code>true</code> if <code>f</code><code>is angle-preserving (has equal-magnitude eigenvalues) and</code>false` otherwise.</p><p>Uses approximate equality to allow for floating point imprecision.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L185-L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.rotated_direction" href="#DeviceLayout.Transformations.rotated_direction"><code>DeviceLayout.Transformations.rotated_direction</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rotated_direction(angle, trans)</code></pre><p>Return the new direction that <code>angle</code> maps to under the transformation <code>trans</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L197-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.rotation" href="#DeviceLayout.Transformations.rotation"><code>DeviceLayout.Transformations.rotation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rotation(f::Transformation; α0=0)</code></pre><p>Return the change in angle when applying <code>f</code> to a line originally at <code>α0</code> CCW from the <code>x</code>-axis.</p><p>By default, <code>α0</code> is taken to be <code>0</code>, and the result is equivalent to the rotation when decomposing the linear part of <code>f</code> into reflection across the <code>x</code>-axis followed by rotation.</p><p>Units are accepted for <code>α0</code> (no units =&gt; radians).</p><p>If <code>f</code> does not preserve angles, a <code>DomainError</code> is thrown.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L161-L172">source</a></section><section><div><pre><code class="language-julia hljs">rotation(ref::GeometryReference; α0=0)</code></pre><p>The change in angle when applying <code>transformation(ref)</code> to a line originally at <code>α0</code> CCW from the <code>x</code>-axis.</p><p>Equivalent to <code>rotation(transformation(ref); α0=α0)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/references.jl#L196-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.rounding_safe" href="#DeviceLayout.Transformations.rounding_safe"><code>DeviceLayout.Transformations.rounding_safe</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rounding_safe(precision, f::Transformation)</code></pre><p><code>true</code> when applying <code>f</code> gives the same results before or after rounding to <code>precision</code>.</p><p>Specifically, if <code>f</code> preserves angles, translates by integer <code>precision</code>, scales by an integer multiplier, and rotates by a multiple of 90°, it is &quot;rounding safe&quot;.</p><p><code>precision</code> should either be an integer type like <code>Int32</code> or unitful type like <code>typeof(1nm)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L282-L291">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.Transformations.xrefl" href="#DeviceLayout.Transformations.xrefl"><code>DeviceLayout.Transformations.xrefl</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">xrefl(f::Transformation)</code></pre><p>Return <code>true</code> if <code>f</code> applies a reflection (has negative determinant) and <code>false</code> otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/transform.jl#L135-L139">source</a></section><section><div><pre><code class="language-julia hljs">xrefl(ref::GeometryReference)</code></pre><p>A <code>Bool</code> indicating whether <code>transformation(ref)</code> includes a reflection.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/references.jl#L182-L186">source</a></section></article><h2 id="Implementation-details"><a class="docs-heading-anchor" href="#Implementation-details">Implementation details</a><a id="Implementation-details-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-details" title="Permalink"></a></h2><p>Geometry objects implement specializations of the <code>transform</code> function that determine how they behave under transformations:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.transform" href="#DeviceLayout.transform"><code>DeviceLayout.transform</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transform(geom::AbstractGeometry, f::Transformation)
transform(
    geom::AbstractGeometry{S};
    origin=zero(Point{S}),
    rot=0°,
    xrefl=false,
    mag=1
)</code></pre><p>Return a new <code>AbstractGeometry</code> obtained by applying <code>f</code> to <code>geom</code>.</p><p>For generic <code>geom</code> and transformation, attempts to decompose <code>f</code> into a scaled isometry: <code>translate ∘ magnify ∘ rotate ∘ reflect_across_xaxis</code>. In that case, if <code>f</code> does not preserve angles, a <code>DomainError</code> will be thrown.</p><p>A concrete subtype of <code>AbstractGeometry</code> must implement</p><pre><code class="nohighlight hljs">transform(ent::MyEntity, f::Transformation)</code></pre><p>It is not, however, required that an arbitrary <code>Transformation</code> be valid on <code>MyEntity</code>. For example, one might write</p><pre><code class="language-julia hljs">transform(ent::MyEntity, f::Transformation) = transform(ent, ScaledIsometry(f))
function transform(ent::MyEntity, f::ScaledIsometry)
    # ... create and return transformed entity
end</code></pre><p>which will throw a <code>DomainError</code> if <code>!preserves_angles(f)</code> (<code>f</code> is not a scaled isometry).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/entities.jl#L322-L355">source</a></section></article><p>This allows special handling for certain types paired with certain transformations. For example, a <code>Rectangle</code> is by definition axis-aligned. If a transformed <code>Rectangle</code> would still be axis-aligned (for example, the result of a translation or 90° rotation), the result will still be a <code>Rectangle</code>, as in the example above; otherwise, it will be a <code>Polygon</code>.</p><p>&quot;Chiral&quot; geometry objects (those that can be either left- or right-handed) can also implement special handling for transformations that include a reflection (which changes handedness).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../geometry/">« Geometry</a><a class="docs-footer-nextpage" href="../entitystyles/">Entity Styles »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 27 February 2025 13:39">Thursday 27 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
