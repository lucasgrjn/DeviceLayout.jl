<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Troubleshooting/FAQ · DeviceLayout.jl</title><meta name="title" content="Troubleshooting/FAQ · DeviceLayout.jl"/><meta property="og:title" content="Troubleshooting/FAQ · DeviceLayout.jl"/><meta property="twitter:title" content="Troubleshooting/FAQ · DeviceLayout.jl"/><meta name="description" content="Documentation for DeviceLayout.jl."/><meta property="og:description" content="Documentation for DeviceLayout.jl."/><meta property="twitter:description" content="Documentation for DeviceLayout.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DeviceLayout.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Geometry-Level Layout</span><ul><li><a class="tocitem" href="../../geometrylevel/">Overview</a></li><li><a class="tocitem" href="../../units/">Units</a></li><li><a class="tocitem" href="../../points/">Points</a></li><li><a class="tocitem" href="../../geometry/">Geometry</a></li><li><a class="tocitem" href="../../transformations/">Transformations</a></li><li><a class="tocitem" href="../../entitystyles/">Entity Styles</a></li><li><a class="tocitem" href="../../polygons/">Polygons</a></li><li><a class="tocitem" href="../../coordinate_systems/">Coordinate Systems</a></li><li><a class="tocitem" href="../../texts/">Texts</a></li><li><a class="tocitem" href="../../paths/">Paths</a></li><li><a class="tocitem" href="../../routes/">Routes</a></li><li><a class="tocitem" href="../../shapes/">Shape library</a></li><li><a class="tocitem" href="../../autofill/">Autofill</a></li><li><a class="tocitem" href="../../render/">Rendering</a></li><li><a class="tocitem" href="../../solidmodels/">Solid Models (3D Geometry)</a></li><li><a class="tocitem" href="../../fileio/">File Formats</a></li><li><a class="tocitem" href="../../faq/">Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Schematic-Driven Layout</span><ul><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../components/">Components</a></li><li><a class="tocitem" href="../hooks/">Hooks</a></li><li><a class="tocitem" href="../schematics/">Schematics</a></li><li><a class="tocitem" href="../technologies/">Technologies</a></li><li><a class="tocitem" href="../targets/">Targets</a></li><li><a class="tocitem" href="../solidmodels/">Solid Models</a></li><li><a class="tocitem" href="../pdks/">PDKs</a></li><li class="is-active"><a class="tocitem" href>Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/examplepdk/">ExamplePDK</a></li><li><a class="tocitem" href="../../examples/qpu17/">Quantum Processor</a></li><li><a class="tocitem" href="../../examples/singletransmon/">Single-Transmon Simulation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Schematic-Driven Layout</a></li><li class="is-active"><a href>Troubleshooting/FAQ</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Troubleshooting/FAQ</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/main/docs/src/schematicdriven/faq.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Troubleshooting-and-FAQ"><a class="docs-heading-anchor" href="#Troubleshooting-and-FAQ">Troubleshooting &amp; FAQ</a><a id="Troubleshooting-and-FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting-and-FAQ" title="Permalink"></a></h1><p><strong>Is there a way to not render a node in the SchematicGraph?</strong></p><p>Rendering with a <code>LayoutTarget</code> will skip all entities with the special metadata <code>DeviceLayout.NORENDER_META = SemanticMeta(:norender)</code>, so there&#39;s a workaround: Try running <code>map_metadata!(component(mynode), (_) -&gt; DeviceLayout.NORENDER_META)</code> before calling <code>build!</code> or <code>render!</code>.</p><p><strong>How do I attach components like readout resonators along a route in the schematic?</strong></p><p>If you have an existing node created by <code>route!</code>, you can attach <code>CoordinateSystemReferences</code> with the function <code>attach!(r::RouteComponent, c::CoordSysRef, t::Coordinate; location::Int=0)</code> and it works like attaching things to a <code>Path</code>. Right now there&#39;s no way to attach a Component to a <code>RouteComponent</code> so that it becomes part of the schematic. For that, use a <code>Path</code> with <code>attach!(::SchematicGraph, ...)</code>.</p><p><strong>How do I attach components like readout resonators along a path in the schematic?</strong></p><p>I recommend creating a straight Path, then attaching your component to that. For example:</p><pre><code class="language-julia hljs">pa = Path(
    Point(0μm, 0μm),
    α0=0°,
    metadata=SemanticMeta(:metal_negative),
    name=uniquename(&quot;coupseg&quot;)
)
straight!(pa, 250μm, cpw_style)

coupling_seg_node = add_node!(g, pa)
rres_node = add_node!(g, readout_resonator)
attach!.(
    g,
    segnode,
    rres_node =&gt; :readout_line,
    pathlength(SchematicDrivenLayout.component(segnode).path) / 2,
    i=1,
    location=1
)
# ... then fuse/route these to other nodes as usual</code></pre><p><strong>What&#39;s with all the semicolons?</strong></p><p>Semicolons are used in Julia in a few places related to key-value pairs:</p><ul><li><p>In function definitions, separating positional arguments from keyword arguments.</p><ul><li>If there are no positional arguments, it&#39;s still necessary to start with a semicolon: <code>function f(; a=1, b=2)...</code></li></ul></li><li><p>In function calls, separating positional arguments from keyword arguments.</p><ul><li>This is optional, but may be used for clarity, especially when splatting keyword arguments when there are no positional arguments</li></ul></li><li><p>To construct literal <code>NamedTuple</code>s: <code>(; a=1, b=2)</code>.</p><ul><li>The semicolon is optional, but if there is only one key/value pair, either a leading semicolon <code>(; a=1)</code> or trailing comma <code>(a=1,)</code> must be used to distinguish it from the expression <code>a=1</code> wrapped in parentheses. (The leading semicolon is preferred for a couple reasons. A single-element <code>Tuple</code> also uses a trailing comma; also, it&#39;s easy to accidentally remove the required trailing comma when removing all but one elements from the expression.)</li><li>An empty <code>NamedTuple</code> can also be constructed with <code>(;)</code>.</li><li>You can also construct <code>NamedTuple</code>s programmatically by splatting an iterator yielding key-value pairs after the semicolon: <code>(; a=1, my_namedtuple..., b=2)</code>.</li></ul></li><li><p>On the left-hand side of an assignment, to unpack/&quot;destructure&quot; a <code>NamedTuple</code> or <code>struct</code> (starting in Julia 1.7).</p><ul><li><code>(; a, b) = x</code> is equivalent to the assignments <code>a = x.a</code> and <code>b = x.b</code></li></ul></li><li><p>For completeness, there are a couple unrelated uses of semicolons:</p><ul><li><p>To separate statements without a line break, as in <code>a = x.a; b = x.b</code></p></li><li><p>To separate array literals for vertical concatenation, as in <code>A_2x3 = [1 2 3; 4 5 6]</code></p><ul><li>N semicolons concatenate along the Nth dimension, as in <code>A_3x2 = [1:3 ;; 4:6]</code></li></ul></li></ul></li></ul><p>In <code>SchematicDrivenLayout</code> specifically, we often work with the <code>parameters</code> of a <code>Component</code> as a <code>NamedTuple</code>.</p><p><strong>How do I add a schematic node so that it&#39;s at a fixed position on the chip?</strong></p><p>One way to do that is to make a top-level parent component with a hook at the position you want. For example, you can use the built-in <a href="../components/#DeviceLayout.SchematicDrivenLayout.Spacer"><code>SchematicDrivenLayout.Spacer</code></a> component:</p><pre><code class="language-julia hljs">g = SchematicGraph(&quot;fixed_demo&quot;)
spacernode = add_node!(g, Spacer(p1=Point(6mm, 1mm)))
fuse!(g, spacernode =&gt; :p1_north, mycomp =&gt; :myhook)</code></pre><p>Any &quot;root&quot; node (one that&#39;s not attached to any previously added node by any chain of connections; this always includes the first node added to a graph) will have its origin at the global origin.</p><p><strong>How do I attach one component to another if there&#39;s no hook where I need it?</strong></p><p>If you need some offset relative to existing hooks, you can use the <code>Spacer</code> (see above) with a <code>p0</code> compass hook fused to one component and a <code>p1</code> compass hook fused to the other.</p><p>For truly ad-hoc positioning, you can use <code>fuse!</code> with an actual <code>Hook</code> object rather than a <code>Symbol</code> identifying the <code>Hook</code> for one or both components. For example, this might be appropriate for labeling and annotation:</p><pre><code class="language-julia hljs">fuse!(
    g,
    mynode =&gt; PointHook(0.5mm, 0.5mm, 90°),
    ArrowAnnotation(text=&quot;(0.5mm, 0.5mm) in mynode&#39;s coordinate system&quot;) =&gt; :tip
)</code></pre><p>However, if you find yourself needing a consistent hook that doesn&#39;t already exist for <code>MyComponent</code>, then it&#39;s generally better to update the component definition so that the hook is available by name through <code>hooks(::MyComponent)</code>.</p><p><strong>How do I make sure there aren&#39;t any bridges along feedline segments with coupled devices?</strong></p><p>You can define a short, straight <code>Path</code> and couple each device to one of those, then route the feedline between the endpoints of coupling segments.</p><p><strong>I edited a component&#39;s <code>_geometry!</code> method but I&#39;m still getting the old geometry. Can I get the new geometry without restarting Julia?</strong></p><p>First, make sure the new code is being loaded. You can use <a href="https://timholy.github.io/Revise.jl/stable/">Revise</a> to automatically use updated code within any package you load with <code>import</code> or <code>using</code> as well as any scripts loaded with <code>includet</code>.</p><p>Most component types, including those defined using <code>@compdef</code>, contain a <code>_geometry</code> field that allows them to store their geometry so that it is only generated once. It is not marked as dirty or automatically regenerated when geometry methods change. Currently, to regenerate the geometry, you have to instantiate a new component.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../pdks/">« PDKs</a><a class="docs-footer-nextpage" href="../../examples/examplepdk/">ExamplePDK »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 27 February 2025 13:39">Thursday 27 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
