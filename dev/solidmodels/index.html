<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Solid Models (3D Geometry) · DeviceLayout.jl</title><meta name="title" content="Solid Models (3D Geometry) · DeviceLayout.jl"/><meta property="og:title" content="Solid Models (3D Geometry) · DeviceLayout.jl"/><meta property="twitter:title" content="Solid Models (3D Geometry) · DeviceLayout.jl"/><meta name="description" content="Documentation for DeviceLayout.jl."/><meta property="og:description" content="Documentation for DeviceLayout.jl."/><meta property="twitter:description" content="Documentation for DeviceLayout.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DeviceLayout.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Geometry-Level Layout</span><ul><li><a class="tocitem" href="../geometrylevel/">Overview</a></li><li><a class="tocitem" href="../units/">Units</a></li><li><a class="tocitem" href="../points/">Points</a></li><li><a class="tocitem" href="../geometry/">Geometry</a></li><li><a class="tocitem" href="../transformations/">Transformations</a></li><li><a class="tocitem" href="../entitystyles/">Entity Styles</a></li><li><a class="tocitem" href="../polygons/">Polygons</a></li><li><a class="tocitem" href="../coordinate_systems/">Coordinate Systems</a></li><li><a class="tocitem" href="../texts/">Texts</a></li><li><a class="tocitem" href="../paths/">Paths</a></li><li><a class="tocitem" href="../routes/">Routes</a></li><li><a class="tocitem" href="../shapes/">Shape library</a></li><li><a class="tocitem" href="../autofill/">Autofill</a></li><li><a class="tocitem" href="../render/">Rendering</a></li><li class="is-active"><a class="tocitem" href>Solid Models (3D Geometry)</a><ul class="internal"><li><a class="tocitem" href="#Physical-groups"><span>Physical groups</span></a></li><li><a class="tocitem" href="#Rendering-to-a-SolidModel"><span>Rendering to a SolidModel</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li></ul></li><li><a class="tocitem" href="../fileio/">File Formats</a></li><li><a class="tocitem" href="../faq/">Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Schematic-Driven Layout</span><ul><li><a class="tocitem" href="../schematicdriven/">Overview</a></li><li><a class="tocitem" href="../schematicdriven/components/">Components</a></li><li><a class="tocitem" href="../schematicdriven/hooks/">Hooks</a></li><li><a class="tocitem" href="../schematicdriven/schematics/">Schematics</a></li><li><a class="tocitem" href="../schematicdriven/technologies/">Technologies</a></li><li><a class="tocitem" href="../schematicdriven/targets/">Targets</a></li><li><a class="tocitem" href="../schematicdriven/solidmodels/">Solid Models</a></li><li><a class="tocitem" href="../schematicdriven/pdks/">PDKs</a></li><li><a class="tocitem" href="../schematicdriven/faq/">Troubleshooting/FAQ</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examplepdk/">ExamplePDK</a></li><li><a class="tocitem" href="../examples/qpu17/">Quantum Processor</a></li><li><a class="tocitem" href="../examples/singletransmon/">Single-Transmon Simulation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Geometry-Level Layout</a></li><li class="is-active"><a href>Solid Models (3D Geometry)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Solid Models (3D Geometry)</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/main/docs/src/solidmodels.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Solid-Models"><a class="docs-heading-anchor" href="#Solid-Models">Solid Models</a><a id="Solid-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Solid-Models" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.SolidModel" href="#DeviceLayout.SolidModels.SolidModel"><code>DeviceLayout.SolidModels.SolidModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SolidModel{T} where {T &lt;: SolidModelKernel}
    name::String
    groups::NTuple{4,Dict{String,AbstractPhysicalGroup}}
end
SolidModel(name::String, kernel=OpenCascade; overwrite=false)</code></pre><p>A 3D geometry model.</p><p>Geometry rendering, boolean operations, and export are provided by the specified <code>kernel</code>.</p><p>Physical groups can be accessed by name using indexing with a <code>String</code> or <code>Symbol</code> and a dimension: <code>mymodel[&quot;mygroup&quot;, 3]</code> will return the <code>PhysicalGroup</code> with dimension 3 called <code>mygroup</code>.</p><p>Physical groups can also be assigned as <code>mymodel[&quot;mygroup&quot;] = dimtags</code>, where <code>dimtags</code> is a list of <code>NTuple{2, Int32}</code> of entities identified by <code>(dim, tag)</code> in <code>mymodel</code>. If <code>dimtags</code> includes entities of multiple dimensions, then a group is created for each dimension.</p><p>If the constructor is called with <code>overwrite=false</code> (the default), then an error will be thrown if a model with the same name already exists. If <code>overwrite=true</code>, then any existing model with the same name will be deleted and a new model will be created.</p><p>A <code>SolidModel</code> can be saved to a file with <code>FileIO.save(filename, sm)</code>. Supported filetypes for OpenCASCADE geometries are <code>.brep</code> and <code>.stp</code>. Meshes can be exported as <code>.msh2</code> (compatible with Palace) or <code>.msh</code> (most recent Gmsh format) files.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/solidmodels.jl#L94-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.SolidModelKernel" href="#DeviceLayout.SolidModels.SolidModelKernel"><code>DeviceLayout.SolidModels.SolidModelKernel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type SolidModelKernel</code></pre><p>Supertype for solid geometry kernels. Subtypes are <code>OpenCascade</code> and <code>GmshNative</code>.</p><p>Note that <code>GmshNative</code> does not support Boolean geometry operations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/solidmodels.jl#L70-L76">source</a></section></article><h2 id="Physical-groups"><a class="docs-heading-anchor" href="#Physical-groups">Physical groups</a><a id="Physical-groups-1"></a><a class="docs-heading-anchor-permalink" href="#Physical-groups" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.PhysicalGroup" href="#DeviceLayout.SolidModels.PhysicalGroup"><code>DeviceLayout.SolidModels.PhysicalGroup</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct PhysicalGroup
    name::String
    model::SolidModel
    dim::Int32
    grouptag::Int32
end</code></pre><p>A named group of entities of dimension <code>dim</code> in a <code>SolidModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/solidmodels.jl#L156-L165">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.dimtags" href="#DeviceLayout.SolidModels.dimtags"><code>DeviceLayout.SolidModels.dimtags</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dimtags(pg::AbstractPhysicalGroup)</code></pre><p>Return the <code>(dimension, integer tag)</code> tuples for <code>SolidModel</code> entities in <code>pg</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/solidmodels.jl#L189-L193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.entitytags" href="#DeviceLayout.SolidModels.entitytags"><code>DeviceLayout.SolidModels.entitytags</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">entitytags(pg::AbstractPhysicalGroup)</code></pre><p>Return the integer tags for <code>SolidModel</code> entities in <code>pg</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/solidmodels.jl#L177-L181">source</a></section></article><h2 id="Rendering-to-a-SolidModel"><a class="docs-heading-anchor" href="#Rendering-to-a-SolidModel">Rendering to a SolidModel</a><a id="Rendering-to-a-SolidModel-1"></a><a class="docs-heading-anchor-permalink" href="#Rendering-to-a-SolidModel" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.render!-Tuple{SolidModel, CoordinateSystem}" href="#DeviceLayout.render!-Tuple{SolidModel, CoordinateSystem}"><code>DeviceLayout.render!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">render!(sm::SolidModel, cs::AbstractCoordinateSystem{T}; map_meta=layer, postrender_ops=[], zmap=(_) -&gt; zero(T), kwargs...) where {T}</code></pre><p>Render <code>cs</code> to <code>sm</code>.</p><p><strong>Keywords</strong></p><ul><li><code>map_meta</code>: Function (m::SemanticMeta) -&gt; name of <code>PhysicalGroup</code> (as <code>String</code> or <code>Symbol</code>; may also return <code>nothing</code> to skip rendering <code>m</code>)</li><li><code>postrender_ops</code>: Vector of Tuples <code>(destination, op, args, op_kwargs...)</code> specifying &quot;postrendering&quot; of <code>PhysicalGroup</code>s executed after entities have been rendered to to <code>sm</code>. Each operation <code>op</code> creates a new <code>PhysicalGroup</code> defined as <code>sm[destination] = op(sm, args...; op_kwargs...)</code>. That is, <code>args</code> are the arguments to <code>op</code> (following the first argument, which is always the model <code>sm</code> being rendered to). For most operations, these arguments include the names and dimensions of groups being operated on, and <code>op_kwargs</code> are the keyword arguments passed to <code>op</code>. For example, <code>(&quot;base&quot;, difference_geom!, (&quot;writeable_area&quot;, &quot;base_negative&quot;), :remove_object =&gt; true, :remove_tool =&gt; true)</code> defines a postrendering step that subtracts the <code>PhysicalGroup</code> named <code>&quot;base_negative&quot;</code> from <code>&quot;writeable_area&quot;</code> (by default using dimension 2 for each group) to define a new group called <code>&quot;base&quot;</code>. The keyword pairs <code>:remove_object=&gt;true</code> and <code>:remove_tool=&gt;true</code> mean that the &quot;object&quot; (first argument) group <code>&quot;writeable_area&quot;</code> and the &quot;tool&quot; (second argument) group <code>&quot;base_negative&quot;</code> are both removed when <code>&quot;base&quot;</code> is created.</li><li><code>zmap</code>: Function (m::SemanticMeta) -&gt; <code>z</code> coordinate of corresponding elements. Default: Map all metadata to zero.</li><li><code>meshing_parameters</code>: <code>MeshingParameters</code> allows customization of the top level meshing parameters when calling Gmsh.</li></ul><p>Available postrendering operations are <a href="#DeviceLayout.SolidModels.translate!"><code>translate!</code></a>, <a href="#DeviceLayout.SolidModels.extrude_z!"><code>extrude_z!</code></a>, <a href="#DeviceLayout.SolidModels.revolve!"><code>revolve!</code></a>, <a href="#DeviceLayout.SolidModels.union_geom!"><code>union_geom!</code></a>, <a href="#DeviceLayout.SolidModels.intersect_geom!"><code>intersect_geom!</code></a>, <a href="#DeviceLayout.SolidModels.difference_geom!"><code>difference_geom!</code></a>, <a href="#DeviceLayout.SolidModels.fragment_geom!"><code>fragment_geom!</code></a>, and <a href="#DeviceLayout.SolidModels.box_selection"><code>box_selection</code></a>. (The geometric Boolean operations are only available for models using the OpenCASCADE kernel.)</p><p>Additional keyword arguments are passed to <a href="#DeviceLayout.SolidModels.to_primitives"><code>SolidModels.to_primitives</code></a> (which falls back to <a href="../geometry/#DeviceLayout.to_polygons"><code>to_polygons</code></a>) and may be used for certain entity types to control how entities of <code>cs</code> are converted to primitives and added to <code>sm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/render.jl#L481-L514">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.to_primitives" href="#DeviceLayout.SolidModels.to_primitives"><code>DeviceLayout.SolidModels.to_primitives</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">to_primitives(::SolidModel, ent::GeometryEntity; kwargs...)</code></pre><p>Return a <code>GeometryEntity</code> or a vector of entities equivalent to <code>ent</code>.</p><p>Called inside <code>render!</code> before adding entities to the <code>SolidModel</code>. Each resulting entity corresponds to a single entity in that <code>SolidModel</code>&#39;s geometry kernel.</p><p>If there is no special handling for <code>ent</code> in the kernel, then the result will be <code>to_polygons(ent; kwargs...)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/render.jl#L5-L15">source</a></section></article><h3 id="Postrendering-operations"><a class="docs-heading-anchor" href="#Postrendering-operations">Postrendering operations</a><a id="Postrendering-operations-1"></a><a class="docs-heading-anchor-permalink" href="#Postrendering-operations" title="Permalink"></a></h3><p>After adding the elements of a <code>CoordinateSystem</code> to a <code>SolidModel</code> (&quot;rendering&quot;), we can perform additional &quot;postrendering&quot; operations including boolean operations, extrusions, and selections, to create new <code>PhysicalGroup</code>s.</p><p>The recommended pattern is to provide all postrendering operations to the <code>postrender_ops</code> keyword argument in <code>render!</code>, because <code>render!</code> performs important cleanup at the very end. Specifically, it removes duplicate elements using the <code>fragment</code> operation; because this can also change the labeling of elements, it then reassigns the resulting elements to their corresponding groups.</p><p>Boolean operations and infix equivalents:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.difference_geom!" href="#DeviceLayout.SolidModels.difference_geom!"><code>DeviceLayout.SolidModels.difference_geom!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">difference_geom!(
    object::Union{PhysicalGroup, AbstractArray{PhysicalGroup}},
    tool::Union{PhysicalGroup, AbstractArray{PhysicalGroup}};
    tag=-1,
    remove_object=false,
    remove_tool=false
)</code></pre><p>Create the geometric difference of the groups <code>object</code> and <code>tool</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>If <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>The operator <code>-</code> can be used as a synonymous infix operator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L528-L546">source</a></section><section><div><pre><code class="language-julia hljs">difference_geom!(sm::SolidModel, object::Union{String, Symbol}, tool::Union{String, Symbol}, d1=2, d2=2;
    tag=-1,
    remove_object=false,
    remove_tool=false)</code></pre><p>Create the geometric difference of groups with <code>Symbol</code> or <code>String</code> names <code>object, tool</code> in <code>sm</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>The dimensions of the object and tool groups can be specified as <code>d1</code> and <code>d2</code>, respectively. The dimension defaults to 2 (surfaces).</p><p>If the <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>If <code>object</code> is not a physical group in <code>sm</code>, will error and return an empty dimtag array. If <code>tool</code> is not a physical group in <code>sm</code>, will return dimtags of <code>object</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L567-L586">source</a></section><section><div><pre><code class="language-julia hljs">difference_geom!(sm::SolidModel, object, tool, d1=2, d2=2; remove_tool=false,
remove_object=false, kwargs...)</code></pre><p>Create the geometric difference of groups <code>object</code> and <code>tool</code> which can be collections of <code>Union{String, Symbol}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L605-L611">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.fragment_geom!" href="#DeviceLayout.SolidModels.fragment_geom!"><code>DeviceLayout.SolidModels.fragment_geom!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fragment_geom!(
    object::Union{PhysicalGroup, AbstractArray{PhysicalGroup}},
    tool::Union{PhysicalGroup, AbstractArray{PhysicalGroup}};
    tag=-1,
    remove_object=false,
    remove_tool=false
)</code></pre><p>Create the Boolean fragments (general fuse) of the groups <code>object</code> and <code>tool</code>, making all interfaces conformal.</p><p>When applied to entities of different dimensions, the lower dimensional entities will be automatically embedded in the higher dimensional entities if they are not on their boundary.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>If <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L667-L687">source</a></section><section><div><pre><code class="language-julia hljs">fragment_geom!(sm::SolidModel, object::Union{String, Symbol}, tool::Union{String, Symbol}, d1=2, d2=2;
    tag=-1,
    remove_object=false,
    remove_tool=false)</code></pre><p>Create the Boolean fragments (general fuse) of groups with <code>Symbol</code> or <code>String</code> names <code>object, tool</code> in <code>sm</code>, making all interfaces conformal.</p><p>When applied to entities of different dimensions, the lower dimensional entities will be automatically embedded in the higher dimensional entities if they are not on their boundary.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>The dimensions of the object and tool groups can be specified as <code>d1</code> and <code>d2</code>, respectively. The dimension defaults to 2 (surfaces).</p><p>If the <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>If only one of <code>object</code> or <code>tool</code> is a physical group in <code>sm</code>, will perform union of physical group with itself, if neither are present will return an empty array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L708-L731">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.intersect_geom!" href="#DeviceLayout.SolidModels.intersect_geom!"><code>DeviceLayout.SolidModels.intersect_geom!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">intersect_geom!(
    object::Union{PhysicalGroup, AbstractArray{PhysicalGroup}},
    tool::Union{PhysicalGroup, AbstractArray{PhysicalGroup}};
    tag=-1,
    remove_object=false,
    remove_tool=false
)</code></pre><p>Create the geometric intersection (the common parts) of the groups <code>object</code> and <code>tool</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>If <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>The operators <code>*</code> and <code>∩</code> can be used as synonymous infix operators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L374-L392">source</a></section><section><div><pre><code class="language-julia hljs">intersect_geom!(sm::SolidModel, object::Union{String, Symbol}, tool::Union{String, Symbol}, d1=2, d2=2;
    tag=-1,
    remove_object=false,
    remove_tool=false)</code></pre><p>Create the geometric intersection (the common parts) of groups with <code>Symbol</code> or <code>String</code> names <code>object, tool</code> in <code>sm</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>The dimensions of the object and tool groups can be specified as <code>d1</code> and <code>d2</code>, respectively. The dimension defaults to 2 (surfaces).</p><p>If the <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>If <code>tool</code> or <code>object</code> are not physical groups in <code>sm</code>, will error and return an empty dimtag array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L413-L431">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.union_geom!" href="#DeviceLayout.SolidModels.union_geom!"><code>DeviceLayout.SolidModels.union_geom!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">union_geom!(
    object::Union{PhysicalGroup, AbstractArray{PhysicalGroup}},
    tool::Union{PhysicalGroup, AbstractArray{PhysicalGroup}};
    tag=-1,
    remove_object=false,
    remove_tool=false
)</code></pre><p>Create the geometric union (the fusion) of the groups <code>object</code> and <code>tool</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>If <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>The operators <code>+</code> and <code>∪</code> can be used as synonymous infix operators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L217-L235">source</a></section><section><div><pre><code class="language-julia hljs">union_geom!(sm::SolidModel, object::Union{String, Symbol}, tool::Union{String, Symbol}, d1=2, d2=2;
    tag=-1,
    remove_object=false,
    remove_tool=false)</code></pre><p>Create the geometric union of groups with <code>Symbol</code> or <code>String</code> names <code>object, tool</code> in <code>sm</code>.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p><p>The dimensions of the object and tool groups can be specified as <code>d1</code> and <code>d2</code>, respectively. The dimension defaults to 2 (surfaces).</p><p>If <code>tag</code> is positive, try to set the tag explicitly (only valid if the boolean operation results in a single entity). Remove the object if <code>remove_object</code> is set. Remove the tool if <code>remove_tool</code> is set.</p><p>If only one of <code>object</code> or <code>tool</code> is a physical group in <code>sm</code>, will perform union of physical group with itself, if neither are present will return an empty array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L256-L275">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:+-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}" href="#Base.:+-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}"><code>Base.:+</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">+(object::AbstractPhysicalGroup, tool::AbstractPhysicalGroup)</code></pre><p>Equivalent to <code>union_geom!(object, tool)</code>. Can be used as an infix (<code>object + tool</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L177-L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:∪-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}" href="#Base.:∪-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}"><code>Base.:∪</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">∪(object::AbstractPhysicalGroup, tool::AbstractPhysicalGroup)</code></pre><p>Equivalent to <code>union_geom!(object, tool)</code>. Can be used as an infix (<code>object ∪ tool</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L185-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:--Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}" href="#Base.:--Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}"><code>Base.:-</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">-(object::AbstractPhysicalGroup, tool::AbstractPhysicalGroup)</code></pre><p>Equivalent to <code>difference_geom!(object, tool)</code>. Can be used as an infix (<code>object - tool</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L193-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:*-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}" href="#Base.:*-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}"><code>Base.:*</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">*(object::AbstractPhysicalGroup, tool::AbstractPhysicalGroup)</code></pre><p>Equivalent to <code>intersect_geom!(object, tool)</code>. Can be used as an infix (<code>object * tool</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L201-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.:∩-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}" href="#Base.:∩-Tuple{DeviceLayout.SolidModels.AbstractPhysicalGroup, DeviceLayout.SolidModels.AbstractPhysicalGroup}"><code>Base.:∩</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">∩(object::AbstractPhysicalGroup, tool::AbstractPhysicalGroup)</code></pre><p>Equivalent to <code>intersect_geom!(object, tool)</code>. Can be used as an infix (<code>object ∩ tool</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L209-L213">source</a></section></article><p>Selections:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.box_selection" href="#DeviceLayout.SolidModels.box_selection"><code>DeviceLayout.SolidModels.box_selection</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">box_selection(x1, y1, z1, x2, y2, z2; dim=-1, delta=zero(x1))
box_selection(::SolidModel, x1, y1, z1, x2, y2, z2; dim=-1, delta=zero(x1))</code></pre><p>Get the model entities in the bounding box defined by the two points (<code>xmin</code>, <code>ymin</code>, <code>zmin</code>) and (<code>xmax</code>, <code>ymax</code>, <code>zmax</code>). If <code>dim</code> is &gt;= 0, return only the entities of the specified dimension (e.g. points if <code>dim</code> == 0).</p><p>Return the selected entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L69-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.get_boundary" href="#DeviceLayout.SolidModels.get_boundary"><code>DeviceLayout.SolidModels.get_boundary</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_boundary(group::AbstractPhysicalGroup; combined=true, oriented=true, recursive=false)
get_boundary(sm::SolidModel, groupname, dim=2; combined=true, oriented=true, recursive=false)</code></pre><p>Get the boundary of the model entities in <code>group</code>, given as a vector of (dim, tag) tuples.</p><p>Return the boundary of the individual entities (if <code>combined</code> is false) or the boundary of the combined geometrical shape formed by all input entities (if <code>combined</code> is true).</p><p>Return tags multiplied by the sign of the boundary entity if <code>oriented</code> is true.</p><p>Apply the boundary operator recursively down to dimension 0 (i.e. to points) if <code>recursive</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L811-L824">source</a></section></article><p>Other operations:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.extrude_z!" href="#DeviceLayout.SolidModels.extrude_z!"><code>DeviceLayout.SolidModels.extrude_z!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extrude_z!(g::PhysicalGroup, dz; num_elements=[], heights=[], recombine=false)
extrude_z!(sm::SolidModel, groupname, dz, groupdim=2; num_elements=[], heights=[], recombine=false)</code></pre><p>Extrude the entities in <code>g</code> in the <code>z</code> direction by <code>dz</code>.</p><p>If the <code>numElements</code> vector is not empty, also extrude the mesh: the entries in <code>numElements</code> give the number of elements in each layer. If the <code>height</code> vector is not empty, it provides the (cumulative) height of the different layers, normalized to 1. If <code>recombine</code> is set, recombine the mesh in the layers.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L116-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.remove_group!" href="#DeviceLayout.SolidModels.remove_group!"><code>DeviceLayout.SolidModels.remove_group!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">remove_group!(sm::SolidModel, group::Union{String, Symbol}, dim; recursive=true, remove_entities=false)
remove_group!(group::AbstractPhysicalGroup; recursive=true, remove_entities=false)</code></pre><p>Remove entities in <code>group</code> from the model, unless they are boundaries of higher-dimensional entities.</p><p>If <code>recursive</code> is true, remove all entities on their boundaries, down to dimension zero (points).</p><p>Also removes the (now-empty) physical group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L853-L862">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.restrict_to_volume!" href="#DeviceLayout.SolidModels.restrict_to_volume!"><code>DeviceLayout.SolidModels.restrict_to_volume!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">restrict_to_volume(sm::SolidModel, volume)</code></pre><p>Replace all entities and groups with their intersection with <code>sm[volume, 3]</code>.</p><p>Embeds entities if they are on the boundary of higher-dimensional entities and removes duplicate entities.</p><p>Preserves the meaning of existing groups by assigning to them the (possibly new) entities corresponding to that group&#39;s intersection with the volume.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L502-L512">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.revolve!" href="#DeviceLayout.SolidModels.revolve!"><code>DeviceLayout.SolidModels.revolve!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">revolve!(g::PhysicalGroup, x, y, z, ax, ay, az, θ; num_elements=[], heights=[], recombine=false)
revolve!(sm::SolidModel, groupname, groupdim, x, y, z, ax, ay, az, θ; num_elements=[], heights=[], recombine=false)</code></pre><p>Extrude the entities in <code>g</code> using a rotation of <code>θ</code> radians around the axis of revolution through <code>(x, y, z)</code> in the direction <code>(ax, ay, az)</code>.</p><p>If the <code>numElements</code> vector is not empty, also extrude the mesh: the entries in <code>numElements</code> give the number of elements in each layer. If the <code>height</code> vector is not empty, it provides the (cumulative) height of the different layers, normalized to 1. If <code>recombine</code> is set, recombine the mesh in the layers. When the mesh is extruded the angle should be strictly smaller than 2π.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L149-L164">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.translate!" href="#DeviceLayout.SolidModels.translate!"><code>DeviceLayout.SolidModels.translate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">translate!(group, dx, dy, dz; copy=true)
translate!(sm::SolidModel, groupname, dx, dy, dz, groupdim=2; copy=true)</code></pre><p>Translate the entities in physical group <code>group</code> by <code>(dx, dy, dz)</code>.</p><p>If <code>copy=true</code>, then a copy of the entities in <code>group</code> are translated instead.</p><p>Return the resulting entities as a vector of <code>(dimension, entity_tag)</code> <code>Tuple</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/postrender.jl#L87-L96">source</a></section></article><h3 id="Meshing"><a class="docs-heading-anchor" href="#Meshing">Meshing</a><a id="Meshing-1"></a><a class="docs-heading-anchor-permalink" href="#Meshing" title="Permalink"></a></h3><p>Entities can carry mesh sizing information with them when rendered to a <code>SolidModel</code>. Many entities will default to a maximal size to reasonably resolve the geometry. This is particularly useful together with adaptive mesh refinement to efficiently refine your mesh to minimize estimated error with as few elements as possible. You can also style entities with <a href="../entitystyles/#DeviceLayout.MeshSized"><code>MeshSized</code></a> to manually control mesh sizing, and provide <code>MeshingParameters</code> to <code>render!</code> using the <code>meshing_parameters</code> keyword argument.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DeviceLayout.SolidModels.MeshingParameters" href="#DeviceLayout.SolidModels.MeshingParameters"><code>DeviceLayout.SolidModels.MeshingParameters</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Base.@kwdef struct MeshingParameters
    mesh_scale::Float64 = 1.0
    mesh_order::Int = 1
    α_default::Float64 = 1.0
    apply_size_to_surfaces::Bool = false
    high_order_optimize::Int = 1
    surface_mesh_algorithm::Int = 6
    volume_mesh_algorithm::Int = 1
    options::Dict{String, Float64} = Dict{String, Float64}()
end</code></pre><p>MeshingParameters contains high level parameters to specify mesh sizing fields throughout the domain.</p><ul><li><code>mesh_scale</code> applies multiplicatively to the smallest size specified by any size field function, comparing to the formula in the <code>MeshSized</code> style, this results in all mesh size fields being rescaled where <code>h</code> ← <code>mesh_scale</code> * <code>h</code>.</li><li><code>mesh_order</code> specifies the order of polynomials to use in representing the geometry, this is important if curved geometric features are present, <code>mesh_order == 1</code> will represent the geometry with linear polynomials, whilst <code>mesh_order == 2</code> will represent it with quadratic polynomials, and <code>mesh_order == 3</code> with cubic polynomials. Increasing the value of <code>mesh_order</code> results in greater geometric fidelity, whilst making meshing more difficult (and prone to errors).</li><li><code>α_default</code> specifies the default value of <code>α</code> to use for <code>MeshSized</code> entities where <code>α</code> is set to less than 0, <code>α_default ∈ (0, 1]</code> is particularly used for the default grading of <code>Path</code> entities.</li><li><code>apply_size_to_surfaces=true</code> will cause the mesh sizing field to specify the size within any sized entities, as opposed to only along the perimeter of the entity if <code>apply_size_to_surfaces=false</code>. Setting <code>apply_size_to_surfaces=true</code> will result in a larger number of elements.</li><li><code>high_order_optimize=0</code> flag to pass to gmsh if optimization of a higher order mesh is to be performed. (0: none, 1: optimization, 2: elastic+optimization, 3: elastic, 4: fast curving). Refer to the gmsh documentation for more details.</li><li><code>surface_mesh_algorithm</code> specifies the algorithm gmsh should use when performing the surface mesh generation. Refer to the gmsh documentation for more details.</li><li><code>volume_mesh_algorithm</code> specifies the algorithm gmsh should use when performing the volume mesh generation. Refer to the gmsh documentation for more details.</li><li><code>options</code> used to specify any additional options provided to gmsh, which will be set with <code>gmsh.options.set_number(key, value)</code> for each <code>key =&gt; value</code> pair. Refer to the gmsh documentation for a list of available options. Will override any other options as is called last.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aws-cqc/DeviceLayout.jl/blob/89c9228ef5c3593070ef47c44c8141f19efd9067/src/solidmodels/render.jl#L427-L469">source</a></section></article><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p>Below, we create a 3D model of a meandered CPW on a chip, restricting the model to a small volume (for example, for the purposes of simulation).</p><pre><code class="language-julia hljs">using DeviceLayout
using FileIO

cs = CoordinateSystem(&quot;test&quot;, nm)

# Create a CPW meander
pa = Path(-0.5mm, 0nm)
straight!(pa, 900μm, Paths.SimpleCPW(10μm, 6μm))
turn!(pa, 180°, 50μm)
straight!(pa, 900μm)
turn!(pa, -180°, 50μm)
straight!(pa, 900μm)
turn!(pa, 180°, 50μm)
straight!(pa, 900μm)
terminate!(pa)
render!(cs, pa, SemanticMeta(:base_negative))

render!(cs, centered(Rectangle(10mm, 10mm)), SemanticMeta(:chip_outline))
render!(cs, centered(Rectangle(9mm, 9mm)), SemanticMeta(:writeable_area))
render!(cs, centered(Rectangle(2mm, 2mm)), SemanticMeta(:simulated_area))

# Define z heights and thickness (where nonzero)
layer_z = Dict(:chip_outline =&gt; -525μm, :simulated_area =&gt; -1mm)
layer_thickness = Dict(:chip_outline =&gt; 525μm, :simulated_area =&gt; 2mm)

# Define postrendering operations:
# Extrusions, geometric Boolean operations, and other transformations
postrender_ops = vcat(
    [   # Extrude layers with nonzero thickness
        (string(layer) * &quot;_extrusion&quot;, SolidModels.extrude_z!, (layer, thickness)) for
        (layer, thickness) in pairs(layer_thickness)
    ],
    [   # sm[&quot;chip_sim&quot;] = intersect_geom!(sm, &quot;simulated_area_extrusion&quot;, ...)
        (   # Intersect chip volume with simulation volume
            &quot;chip_sim&quot;, # New physical group name
            SolidModels.intersect_geom!, # Operation
            # Arguments: Object, tool, object dimension, tool dimension
            (&quot;simulated_area_extrusion&quot;, &quot;chip_outline_extrusion&quot;, 3, 3), # Vol ∩ Vol
            # Keyword arguments
            :remove_tool =&gt; true # Remove the &quot;chip_outline_extrusion&quot; group
        ),
        (   # Intersect writeable area with simulation volume
            &quot;writeable_sim&quot;,
            SolidModels.intersect_geom!,
            (&quot;simulated_area_extrusion&quot;, &quot;writeable_area&quot;, 3, 2), # Volume ∩ Area
            :remove_tool =&gt; true # Remove &quot;writeable_area&quot; group
        ),
        (   # Create group for non-chip volumes (vacuum)
            &quot;vac_sim&quot;,
            SolidModels.difference_geom!, # Subtract &quot;tool&quot; from &quot;object&quot;
            (&quot;simulated_area_extrusion&quot;, &quot;chip_sim&quot;, 3, 3),
            :remove_object =&gt; true # Remove &quot;simulated_area_extrusion&quot; group
        ),
        (   # Subtract negative from writeable area to get metal area
            &quot;base_metal&quot;,
            SolidModels.difference_geom!,
            (&quot;writeable_sim&quot;, &quot;base_negative&quot;), # Uses default dimension 2
            :remove_object =&gt; true # Remove &quot;writeable_sim&quot; group
        )
    ]
)

sm = SolidModel(&quot;model&quot;; overwrite=true)
SolidModels.render!(
    sm,
    cs,
    zmap=(m) -&gt; get(layer_z, layer(m), 0μm),
    postrender_ops=postrender_ops
)
SolidModels.gmsh.model.mesh.generate() # Generate default mesh (low quality)
save(&quot;model.msh2&quot;, sm) # Use older MSH v2 format (Gmsh format compatible with Palace)
# save(&quot;model.stp&quot;, sm) # Use standard STEP format
SolidModels.gmsh.finalize() # Finalize the Gmsh API when done using Gmsh</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../render/">« Rendering</a><a class="docs-footer-nextpage" href="../fileio/">File Formats »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 27 February 2025 13:39">Thursday 27 February 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
